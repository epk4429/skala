<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ë¬¸ ì²˜ë¦¬</title>
    <style>
        :root{
            --bg:#f4f6f8;        
            --card:#ffffff;
            --text:#111827;
            --primary:#0073e9;   
            --border:#e5e7eb;
            --primaryHover:#0062c7;
            --muted:#6b7280;
        }
        *{ box-sizing: border-box; }
        
        body{
            margin:0;
            font-family: "Malgun Gothic","Apple SD Gothic Neo",sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .wrap{
            width: min(520px, 100%); 
            display:flex;
            flex-direction: column;
            gap: 14px;
        }

        header{
            display:flex;
            align-items:center;
            justify-content: center;
            gap: 12px;
        }

        h1{
            margin:0;
            font-size: 22px;
            font-weight: 800;
            text-align: center; 
        }

        .card{
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;                
            padding: 18px;
            box-shadow: 0 6px 18px rgba(0,0,0,.06); 
        }

        .form-grid{
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .field{
            display:flex;
            flex-direction: column; /* ë°©í–¥ ê°€ë¡œ->ì„¸ë¡œ */
            gap: 8px;
        }

        label{
            font-weight: 700;
            font-size: 13px;
            color: #374151;
        }

        input, select{
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 12px;
            font-size: 14px;
            background: #fff;
            outline: none;
        }

            input::placeholder{
            color: #9ca3af;
        }

        input:focus, select:focus{
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0,115,233,.16);
        }

        .actions{
            margin-top: 10px;
        }

        button{
            border: none;
            border-radius: 10px;
            padding: 12px 14px;
            font-weight: 700;
            cursor: pointer;
        }

        .btn-primary{
            width: 100%;              
            background: var(--primary);
            color: white;
            padding: 13px 14px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 800;
        }
        .btn-primary:hover{ 
            background: var(--primaryHover);
            filter: none; 
        }

        .result{
            display:flex;
            flex-direction: column;   
            align-items: flex-start;
            gap: 8px;
            padding: 14px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: #f9fafb;    
        }
        .result strong{ 
            font-size: 13px;
            color: #374151; }
        .result .msg{ 
            margin:0;
            font-size: 14px;
            color: var(--muted); 
        }
        .result.ok{
            border-color: rgba(0,115,233,.35);
            background: rgba(0,115,233,.06);
        }
        .result.bad{
            border-color: rgba(220,38,38,.35);
            background: rgba(220,38,38,.06);
        }
    </style>
</head>
<body>
    <div class="wrap">
        <header>
            <h1>ğŸ›’ê³ ê° ì£¼ë¬¸ ì²˜ë¦¬</h1>
        </header>
        
        <div class="card">
            <div class="form-grid">
                <div class="field">
                    <label for="itemStock">ìƒí’ˆ ì¬ê³ </label>
                    <input id="itemStock" type="number" min="0" step="1" placeholder="ì¬ê³  ì…ë ¥" />
                </div>

                <div class="field">
                    <label for="membership">ë©¤ë²„ì‹­ ë“±ê¸‰</label>
                    <!-- ë“œë¡­ë‹¤ìš´ ìƒì„± -->
                    <select id="membership"> 
                        <option value="none">ì¼ë°˜(í• ì¸ ì—†ìŒ)</option>
                        <option value="VIP">VIP(10%)</option>
                        <option value="Gold">Gold(5%)</option>
                    </select>
                </div>

                <div class="field">
                    <label for="orderAmount">ì£¼ë¬¸ ê¸ˆì•¡</label>
                    <input id="orderAmount" type="number" min="0" step="10" placeholder="0" />
                </div>

                <div class="field">
                    <label for="shippingOption">ë°°ì†¡ ì˜µì…˜</label>
                    <select id="shippingOption">
                        <option value="standard">standard(ì¼ë°˜ ë°°ì†¡)</option>
                        <option value="fast">fast(ë¹ ë¥¸ ë°°ì†¡ +3,000ì›)</option>
                    </select>
                </div>
            </div>

            <div class="actions">
                <button class="btn-primary" id="orderBtn" type="button">ì£¼ë¬¸í•˜ê¸°</button>
            </div>           
        </div>
        <div class="card">
            <div id="resultBox" class="result">
                <strong>ì£¼ë¬¸ ê²°ê³¼</strong>
                <p id="resultMsg" class="msg">ì£¼ë¬¸í•˜ê¸°ë¥¼ ëˆ„ë¥´ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>


    <script>
        // í•œêµ­ ì§€ì—­ì— ë§ì¶° ìˆ«ì ì•ì— ì²œ ë‹¨ìœ„ë¡œ ,ë¥¼ ë¶™ì—¬ì¤Œ
        function Won(n){
            return n.toLocaleString("ko-KR") + "ì›";
        }

        function processOrder(itemStock, membership, orderAmount, shippingOption){

            if(itemStock < 1){
                return {
                    success: false,
                    finalPrice: null,
                    message: "ì£„ì†¡í•©ë‹ˆë‹¤. í•´ë‹¹ ìƒí’ˆì€ í’ˆì ˆì…ë‹ˆë‹¤."
                };
            }

            let memberDiscount = 0; /* ë©¤ë²„ì‹­ ê¸°ë³¸í• ì¸ */
            let extraDiscount = 0;  /* ì£¼ë¬¸ ê¸ˆì•¡ ì¶”ê°€ í• ì¸ */
            let shippingPrice = 0;  /* ë°°ì†¡ë¹„ */
            let price = 0;          /* ë°°ì†¡ë¹„ ì¶”ê°€ ì „ ê¸ˆì•¡ */

            if(membership === "VIP") memberDiscount = 0.10;
            else if(membership === "Gold") memberDiscount = 0.05;

            /* ë©¤ë²„ì‹­ í• ì¸ ì ìš© */
            const aftermemberDiscount = Math.floor(orderAmount * (1 - memberDiscount));

            if(aftermemberDiscount >= 200000) extraDiscount = 15000;
            else if(aftermemberDiscount >= 100000) extraDiscount = 5000;

            /* ê¸ˆì•¡ ì¶”ê°€ í• ì¸ ì ìš© */
            price = aftermemberDiscount - extraDiscount;

            
            if(shippingOption === "fast") shippingPrice = 3000;
            /* ë°°ì†¡ë¹„ í•©ì‚° */
            price += shippingPrice;
            
            if(price < 0) price = 0;

            return {
                success: true,
                finalPrice: price,
                message: `ì£¼ë¬¸ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìµœì¢… ê²°ì œ ê¸ˆì•¡: ${Won(price)}`
            };
        }

        function validateCheck(stockStr, amountStr){
            const stock = Number(stockStr);
            const amount = Number(amountStr);

             if (stockStr === "" || amountStr === ""){
                return { ok:false, message:"ìƒí’ˆ ì¬ê³ ì™€ ì£¼ë¬¸ê¸ˆì•¡ì„ í™•ì¸í•´ì£¼ì„¸ìš”." };
            }
            // ì •ìˆ˜ì¸ì§€ í™•ì¸
            if (!Number.isInteger(stock) || stock < 0){
                return { ok:false, message:"ìƒí’ˆ ì¬ê³ ëŠ” 0 ì´ìƒì˜ ì •ìˆ˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”." };
            }
            if (amount < 0){
                return { ok:false, message:"ì£¼ë¬¸ê¸ˆì•¡ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤." };
            }

            return { ok:true, stock, amount };
        }

        const stockInput = document.getElementById("itemStock");
        const gradeInput = document.getElementById("membership");
        const amountInput = document.getElementById("orderAmount");
        const shippingInput = document.getElementById("shippingOption");
        const resultBox = document.getElementById("resultBox");
        const resultMsg = document.getElementById("resultMsg");

        function showResult(success, message){
            resultMsg.textContent = message;
            resultBox.classList.remove("ok","bad");
            resultBox.classList.add(success ? "ok" : "bad");
        }

        document.getElementById("orderBtn").addEventListener("click", () => {
            const v = validateCheck(stockInput.value, amountInput.value);

            if (!v.ok){
                showResult(false, v.message);
                return;
            }

            const membergrade = gradeInput.value;      
            const shipping = shippingInput.value;

            const result = processOrder(v.stock, membergrade, v.amount, shipping);
            showResult(result.success, result.message);
        });
    </script>
</body>
</html>